(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7738],{14095:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>o});var l=a(95155),t=a(12115),r=a(46398);let c=(0,a(71847).A)("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);var i=a(52987),n=a(26983);function o(){let[e,s]=(0,t.useState)(""),[a,o]=(0,t.useState)(""),[d,x]=(0,t.useState)("Carro"),[m,h]=(0,t.useState)(""),[u,p]=(0,t.useState)(""),[v,y]=(0,t.useState)(!1),[j,N]=(0,t.useState)(null),[g,f]=(0,t.useState)(null),[k,b]=(0,t.useState)([]),[w,A]=(0,t.useState)(!0),C=(0,t.useCallback)(async()=>{A(!0);try{let s=await fetch("/api/logistics");if(s.ok){var e;let a=await s.json();b(null!=(e=a.routes)?e:[])}}finally{A(!1)}},[]);(0,t.useEffect)(()=>{C()},[C]);let S=async()=>{if(e.trim()&&a.trim()){y(!0),N(null),f(null);try{let l=await fetch("/api/logistics",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({origin:e,destination:a,vehicle:d,notes:m,project_id:u||void 0})}),t=await l.json();if(l.ok)N(t),await C();else{var s;f(null!=(s=t.error)?s:"Erro ao calcular rota")}}catch(e){f("Erro de liga\xe7\xe3o")}finally{y(!1)}}},_=e=>{let s=Math.floor(e/60),a=e%60;return s>0?"".concat(s,"h ").concat(a,"min"):"".concat(a,"min")};return(0,l.jsxs)("div",{className:"space-y-6 max-w-2xl mx-auto",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)(r.A,{className:"h-6 w-6",style:{color:"var(--accent)"}}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-xl font-bold",style:{color:"var(--text)"},children:"Log\xedstica"}),(0,l.jsx)("p",{className:"text-sm",style:{color:"var(--text-3)"},children:"Planeador de rotas"})]})]}),(0,l.jsxs)("div",{className:"card-glass rounded-xl p-5 space-y-4",children:[(0,l.jsx)("p",{className:"font-semibold",style:{color:"var(--text)"},children:"Nova rota"}),(0,l.jsxs)("div",{className:"grid grid-cols-1 gap-3",children:[(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("label",{className:"text-xs font-medium",style:{color:"var(--text-2)"},children:"Origem"}),(0,l.jsx)("input",{className:"input w-full",placeholder:"Ex: Lisboa, Marqu\xeas de Pombal",value:e,onChange:e=>s(e.target.value)})]}),(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("label",{className:"text-xs font-medium",style:{color:"var(--text-2)"},children:"Destino"}),(0,l.jsx)("input",{className:"input w-full",placeholder:"Ex: Porto, Av. dos Aliados",value:a,onChange:e=>o(e.target.value)})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("label",{className:"text-xs font-medium",style:{color:"var(--text-2)"},children:"Ve\xedculo"}),(0,l.jsxs)("select",{className:"input w-full",value:d,onChange:e=>x(e.target.value),children:[(0,l.jsx)("option",{children:"Carro"}),(0,l.jsx)("option",{children:"Carrinha"}),(0,l.jsx)("option",{children:"Caminh\xe3o"})]})]}),(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("label",{className:"text-xs font-medium",style:{color:"var(--text-2)"},children:"Projeto"}),(0,l.jsx)("select",{className:"input w-full",value:u,onChange:e=>p(e.target.value),children:(0,l.jsx)("option",{value:"",children:"Sem projeto"})})]})]}),(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("label",{className:"text-xs font-medium",style:{color:"var(--text-2)"},children:"Notas"}),(0,l.jsx)("input",{className:"input w-full",placeholder:"Notas opcionais...",value:m,onChange:e=>h(e.target.value)})]})]}),(0,l.jsx)("button",{className:"btn btn-primary w-full",onClick:S,disabled:v||!e.trim()||!a.trim(),children:v?"A calcularâ€¦":"Calcular rota"})]}),g&&(0,l.jsx)("div",{className:"rounded-xl p-4 text-sm",style:{background:"rgba(239,68,68,0.1)",border:"1px solid rgba(239,68,68,0.3)",color:"#ef4444"},children:g}),j&&(0,l.jsxs)("div",{className:"card-glass rounded-xl p-5 space-y-3",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(c,{className:"h-5 w-5",style:{color:"var(--accent)"}}),(0,l.jsx)("p",{className:"font-semibold",style:{color:"var(--text)"},children:"Resultado"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2 text-sm",style:{color:"var(--text-2)"},children:[(0,l.jsx)("span",{className:"font-medium",style:{color:"var(--text)"},children:j.origin}),(0,l.jsx)(i.A,{className:"h-4 w-4 shrink-0",style:{color:"var(--accent)"}}),(0,l.jsx)("span",{className:"font-medium",style:{color:"var(--text)"},children:j.destination})]}),j.api_unavailable?(0,l.jsx)("div",{className:"rounded-lg p-3 text-sm",style:{background:"rgba(245,158,11,0.1)",border:"1px solid rgba(245,158,11,0.3)",color:"#f59e0b"},children:"Estimativa n\xe3o dispon\xedvel - API n\xe3o configurada"}):(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,l.jsxs)("div",{className:"rounded-lg p-3 text-center",style:{background:"var(--surface-2)"},children:[(0,l.jsx)("p",{className:"text-2xl font-bold",style:{color:"var(--accent)"},children:j.distance_km.toFixed(1)}),(0,l.jsx)("p",{className:"text-xs",style:{color:"var(--text-3)"},children:"km"})]}),(0,l.jsxs)("div",{className:"rounded-lg p-3 text-center",style:{background:"var(--surface-2)"},children:[(0,l.jsxs)("div",{className:"flex items-center justify-center gap-1",children:[(0,l.jsx)(n.A,{className:"h-4 w-4",style:{color:"var(--accent)"}}),(0,l.jsx)("p",{className:"text-2xl font-bold",style:{color:"var(--accent)"},children:_(j.duration_min)})]}),(0,l.jsx)("p",{className:"text-xs",style:{color:"var(--text-3)"},children:"tempo estimado"})]})]}),(0,l.jsxs)("p",{className:"text-xs",style:{color:"var(--text-3)"},children:["Ve\xedculo: ",j.vehicle]})]}),(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsx)("p",{className:"text-sm font-semibold",style:{color:"var(--text-2)"},children:"Hist\xf3rico"}),w?(0,l.jsx)("div",{className:"space-y-2",children:[1,2,3].map(e=>(0,l.jsx)("div",{className:"card-glass rounded-xl h-16 animate-pulse",style:{background:"var(--surface)"}},e))}):0===k.length?(0,l.jsx)("div",{className:"card-glass rounded-xl p-6 text-center",children:(0,l.jsx)("p",{className:"text-sm",style:{color:"var(--text-3)"},children:"Sem rotas calculadas ainda"})}):(0,l.jsx)("div",{className:"space-y-2",children:k.slice(0,10).map(e=>(0,l.jsxs)("div",{className:"card-glass rounded-xl p-3 flex items-center gap-3",children:[(0,l.jsx)(r.A,{className:"h-4 w-4 shrink-0",style:{color:"var(--text-3)"}}),(0,l.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,l.jsxs)("div",{className:"flex items-center gap-1 text-sm",style:{color:"var(--text)"},children:[(0,l.jsx)("span",{className:"truncate",children:e.origin}),(0,l.jsx)(i.A,{className:"h-3.5 w-3.5 shrink-0",style:{color:"var(--accent)"}}),(0,l.jsx)("span",{className:"truncate",children:e.destination})]}),(0,l.jsxs)("div",{className:"flex items-center gap-3 mt-0.5",children:[(0,l.jsxs)("span",{className:"text-xs",style:{color:"var(--text-3)"},children:[e.distance_km.toFixed(1)," km"]}),(0,l.jsx)("span",{className:"text-xs",style:{color:"var(--text-3)"},children:_(e.duration_min)}),(0,l.jsx)("span",{className:"text-xs",style:{color:"var(--text-3)"},children:e.vehicle})]})]}),(0,l.jsx)("span",{className:"text-xs shrink-0",style:{color:"var(--text-3)"},children:new Date(e.created_at).toLocaleDateString("pt-PT")})]},e.id))})]})]})}},26983:(e,s,a)=>{"use strict";a.d(s,{A:()=>l});let l=(0,a(71847).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},46398:(e,s,a)=>{"use strict";a.d(s,{A:()=>l});let l=(0,a(71847).A)("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]])},50621:(e,s,a)=>{Promise.resolve().then(a.bind(a,14095))},52987:(e,s,a)=>{"use strict";a.d(s,{A:()=>l});let l=(0,a(71847).A)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},71847:(e,s,a)=>{"use strict";a.d(s,{A:()=>i});var l=a(12115);let t=function(){for(var e=arguments.length,s=Array(e),a=0;a<e;a++)s[a]=arguments[a];return s.filter((e,s,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===s).join(" ").trim()};var r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let c=(0,l.forwardRef)((e,s)=>{let{color:a="currentColor",size:c=24,strokeWidth:i=2,absoluteStrokeWidth:n,className:o="",children:d,iconNode:x,...m}=e;return(0,l.createElement)("svg",{ref:s,...r,width:c,height:c,stroke:a,strokeWidth:n?24*Number(i)/Number(c):i,className:t("lucide",o),...m},[...x.map(e=>{let[s,a]=e;return(0,l.createElement)(s,a)}),...Array.isArray(d)?d:[d]])}),i=(e,s)=>{let a=(0,l.forwardRef)((a,r)=>{let{className:i,...n}=a;return(0,l.createElement)(c,{ref:r,iconNode:s,className:t("lucide-".concat(e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),i),...n})});return a.displayName="".concat(e),a}}},e=>{e.O(0,[8441,1255,7358],()=>e(e.s=50621)),_N_E=e.O()}]);