(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9328],{20063:(e,a,r)=>{"use strict";var o=r(47260);r.o(o,"useParams")&&r.d(a,{useParams:function(){return o.useParams}}),r.o(o,"usePathname")&&r.d(a,{usePathname:function(){return o.usePathname}}),r.o(o,"useRouter")&&r.d(a,{useRouter:function(){return o.useRouter}}),r.o(o,"useSearchParams")&&r.d(a,{useSearchParams:function(){return o.useSearchParams}})},26041:(e,a,r)=>{"use strict";r.d(a,{BU:()=>s,V:()=>c,dx:()=>n,iJ:()=>t,qd:()=>l,vj:()=>o});let o=[{value:"crew",label:"Equipa (Crew)",color:"#1a8fa3"},{value:"equipamento",label:"Equipamento",color:"#8b6b56"},{value:"pos_producao",label:"P\xf3s-Produ\xe7\xe3o",color:"#7c3aed"},{value:"despesas",label:"Despesas",color:"#d97706"},{value:"outro",label:"Outro",color:"#5a6280"}],t=[{value:"continental_23",label:"Continental (23%)",rate:23},{value:"madeira_22",label:"Madeira (22%)",rate:22},{value:"acores_16",label:"A\xe7ores (16%)",rate:16},{value:"isento",label:"Isento / Art. 53.\xba (0%)",rate:0}];function c(e){var a,r;return null!=(r=null==(a=t.find(a=>a.value===e))?void 0:a.rate)?r:23}let s=[{value:"rascunho",label:"Rascunho",badge:"badge-default"},{value:"enviado",label:"Enviado",badge:"badge-accent"},{value:"aprovado",label:"Aprovado",badge:"badge-success"},{value:"cancelado",label:"Cancelado",badge:"badge-error"},{value:"arquivado",label:"Arquivado",badge:"badge-warning"}],l=[{value:"pre_producao",label:"Pr\xe9-Produ\xe7\xe3o",color:"#1a8fa3"},{value:"rodagem",label:"Rodagem",color:"#d97706"},{value:"pos_producao",label:"P\xf3s-Produ\xe7\xe3o",color:"#7c3aed"}],n={iva_regime:"continental_23",overhead_pct:15,contingencia_pct:10,margem_alvo_pct:30,margem_minima_pct:15,investimento_pct:0,moeda:"EUR"}},62890:(e,a,r)=>{"use strict";r.d(a,{U:()=>t});var o=r(55417);function t(){return(0,o.createBrowserClient)("https://wjzcutnjnzxylzqysneg.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndqemN1dG5qbnp4eWx6cXlzbmVnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzEzMjYzMjcsImV4cCI6MjA4NjkwMjMyN30.bku3F43nks_Uq22Ag-viZZpMQfrw43eq3sahNChbBq8")}},80095:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>n});var o=r(95155),t=r(20063),c=r(12115),s=r(62890),l=r(26041);function n(){let e=(0,t.useRouter)();return(0,c.useEffect)(()=>{(async()=>{let a=(0,s.U)(),{data:{user:r}}=await a.auth.getUser();if(!r)return e.push("/login");let{data:o}=await a.from("preferences").select("*").eq("user_id",r.id).single(),t=null!=o?o:l.dx,{data:c,error:n}=await a.from("projects").insert({user_id:r.id,owner_user_id:r.id,project_name:"Novo Projeto",client_name:"",status:"rascunho",inputs:{itens:[],overhead_pct:t.overhead_pct,contingencia_pct:t.contingencia_pct,margem_alvo_pct:t.margem_alvo_pct,margem_minima_pct:t.margem_minima_pct,investimento_pct:t.investimento_pct,iva_regime:t.iva_regime},calc:{custo_crew:0,custo_equipamento:0,custo_pos:0,custo_despesas:0,custo_outro:0,custo_direto:0,overhead_valor:0,subtotal_com_overhead:0,contingencia_valor:0,subtotal_com_contingencia:0,investimento_valor:0,subtotal_pre_iva:0,iva_valor:0,preco_recomendado:0,preco_recomendado_com_iva:0,margem_alvo_valor:0,preco_minimo:0,preco_minimo_com_iva:0,margem_minima_valor:0}}).select("id").single();if(n||!c)return e.push("/app/projects");e.replace("/app/projects/".concat(c.id))})()},[e]),(0,o.jsx)("div",{className:"flex min-h-[50vh] items-center justify-center",children:(0,o.jsxs)("div",{className:"text-center space-y-3",children:[(0,o.jsx)("div",{className:"flex justify-center",children:(0,o.jsxs)("svg",{className:"h-8 w-8 animate-spin",style:{color:"var(--accent)"},viewBox:"0 0 24 24",fill:"none",children:[(0,o.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,o.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]})}),(0,o.jsx)("p",{className:"text-sm",style:{color:"var(--text-2)"},children:"A criar projetoâ€¦"})]})})}},91779:(e,a,r)=>{Promise.resolve().then(r.bind(r,80095))}},e=>{e.O(0,[5417,8441,1255,7358],()=>e(e.s=91779)),_N_E=e.O()}]);