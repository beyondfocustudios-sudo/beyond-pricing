(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4143],{4874:(e,a,s)=>{"use strict";s.d(a,{HI:()=>i,HY:()=>o,Pm:()=>n,XC:()=>d,Y3:()=>c,bm:()=>l});var t=s(12115),r=s(41407);let l={page:{duration:.26,ease:"easeOut"},micro:{type:"spring",stiffness:380,damping:32,mass:.6},smooth:{duration:.22,ease:"easeOut"}},i={page:{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8}},tab:{initial:{opacity:0,x:12},animate:{opacity:1,x:0},exit:{opacity:0,x:-12}},listItem:{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8}},fadeIn:{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}}};function n(){return!(0,r.I)()}function c(){let e=n(),[a,s]=(0,t.useState)(!1);return(0,t.useEffect)(()=>{let e=window.matchMedia("(min-width: 1024px) and (hover: hover) and (pointer: fine)"),a=()=>s(e.matches);return a(),e.addEventListener("change",a),()=>e.removeEventListener("change",a)},[]),e&&a}function o(e){var a,s;return e.enabled?{whileHover:{y:null!=(a=e.hoverY)?a:-1.5},whileTap:{scale:null!=(s=e.tapScale)?s:.98},transition:l.micro}:{}}function d(e){return e?{whileHover:{y:-4,scale:1.004},transition:l.micro}:{}}},5917:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(71847).A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},6132:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(71847).A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},6191:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(71847).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},18085:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(71847).A)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]])},20063:(e,a,s)=>{"use strict";var t=s(47260);s.o(t,"useParams")&&s.d(a,{useParams:function(){return t.useParams}}),s.o(t,"usePathname")&&s.d(a,{usePathname:function(){return t.usePathname}}),s.o(t,"useRouter")&&s.d(a,{useRouter:function(){return t.useRouter}}),s.o(t,"useSearchParams")&&s.d(a,{useSearchParams:function(){return t.useSearchParams}})},24589:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(71847).A)("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]])},35299:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(71847).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},37586:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(71847).A)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},41407:(e,a,s)=>{"use strict";s.d(a,{I:()=>i});var t=s(40031),r=s(15824),l=s(12115);function i(){t.r.current||(0,r.Uu)();let[e]=(0,l.useState)(t.O.current);return e}},61362:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(71847).A)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},66832:(e,a,s)=>{Promise.resolve().then(s.bind(s,71334))},71334:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>S});var t=s(95155),r=s(12115),l=s(52619),i=s.n(l),n=s(20063),c=s(69434),o=s(35299),d=s(6132),m=s(93499),h=s(95740),p=s(6191),u=s(89715),x=s(71847);let v=(0,x.A)("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);var y=s(18085),f=s(61362),j=s(78874),b=s(5917),N=s(24589),g=s(37586),w=s(75426);let k=(0,x.A)("CirclePause",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"10",x2:"10",y1:"15",y2:"9",key:"c1nkhi"}],["line",{x1:"14",x2:"14",y1:"15",y2:"9",key:"h65svq"}]]);var A=s(4874);function C(e){if(!Number.isFinite(e))return"--:--";let a=Math.max(0,Math.floor(Number(e))),s=Math.floor(a/60).toString().padStart(2,"0"),t=(a%60).toString().padStart(2,"0");return"".concat(s,":").concat(t)}function S(){var e,a,s,l,x;let{deliverableId:S}=(0,n.useParams)(),P=null!=(l=(0,n.useSearchParams)().get("v"))?l:"",E=(0,A.Pm)(),M=(0,r.useRef)(null),[_,T]=(0,r.useState)(!0),[F,I]=(0,r.useState)(null),[O,q]=(0,r.useState)(null),[z,R]=(0,r.useState)([]),[H,L]=(0,r.useState)(P),[V,J]=(0,r.useState)(null),[D,U]=(0,r.useState)(""),[Y,G]=(0,r.useState)(null),[X,$]=(0,r.useState)({}),[W,Z]=(0,r.useState)(""),[B,K]=(0,r.useState)(null),[Q,ee]=(0,r.useState)(null),[ea,es]=(0,r.useState)(""),[et,er]=(0,r.useState)(7),[el,ei]=(0,r.useState)(!1),[en,ec]=(0,r.useState)(!1),[eo,ed]=(0,r.useState)(!0),[em,eh]=(0,r.useState)(null),ep=(0,r.useCallback)(async e=>{var a,s;let t=await fetch("/api/review/threads?versionId=".concat(encodeURIComponent(e)),{cache:"no-store"}),r=await t.json().catch(()=>({}));if(!t.ok)throw Error(null!=(a=r.error)?a:"Falha ao carregar coment\xe1rios.");R(null!=(s=r.threads)?s:[])},[]),eu=(0,r.useCallback)(async e=>{T(!0),I(null);try{var a,s,t;let r=e?"?versionId=".concat(encodeURIComponent(e)):"",l=await fetch("/api/review/deliverables/".concat(S).concat(r),{cache:"no-store"}),i=await l.json().catch(()=>({}));if(!l.ok)throw Error(null!=(t=i.error)?t:"Falha ao carregar review.");q(i);let n=e||i.selectedVersionId||(null==(s=i.versions)||null==(a=s[0])?void 0:a.id)||"";L(n),n?await ep(n):R([])}catch(e){I(e instanceof Error?e.message:"Erro inesperado ao carregar review.")}finally{T(!1)}},[S,ep]);(0,r.useEffect)(()=>{eu(P||void 0)},[eu,P]);let ex=(0,r.useMemo)(()=>{var e,a;return O&&null!=(a=null!=(e=O.versions.find(e=>e.id===H))?e:O.versions[0])?a:null},[O,H]),ev=(null==ex?void 0:ex.file_url)||(null==O||null==(e=O.latestFile)?void 0:e.shared_link)||(null==O||null==(a=O.latestFile)?void 0:a.preview_url)||"",ey=((null==ex?void 0:ex.file_type)||(null==O||null==(s=O.latestFile)?void 0:s.file_type)||"").toLowerCase(),ef=ey.includes("video")||/\.(mp4|mov|m4v|webm)$/i.test(ev),ej=ey.includes("image")||/\.(jpg|jpeg|png|gif|webp)$/i.test(ev),eb=async e=>{if(e.preventDefault(),H&&D.trim()){K("create-thread"),ee(null);try{var a;let e={versionId:H,body:D.trim(),timecodeSeconds:Y},s=await fetch("/api/review/threads",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),t=await s.json().catch(()=>({}));if(!s.ok)throw Error(null!=(a=t.error)?a:"Falha ao criar thread.");U(""),G(null),await ep(H),ee("Coment\xe1rio registado com sucesso.")}catch(e){ee(e instanceof Error?e.message:"Falha ao criar coment\xe1rio.")}finally{K(null)}}},eN=async e=>{var a,s;let t=(null!=(a=X[e])?a:"").trim();if(t){K("reply-".concat(e)),ee(null);try{let a=await fetch("/api/review/comments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({threadId:e,body:t})}),r=await a.json().catch(()=>({}));if(!a.ok)throw Error(null!=(s=r.error)?s:"Falha ao responder.");$(a=>({...a,[e]:""})),H&&await ep(H)}catch(e){ee(e instanceof Error?e.message:"Falha ao responder.")}finally{K(null)}}},eg=async(e,a)=>{K("thread-".concat(e));try{var s;let t=await fetch("/api/review/threads/".concat(e),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:a})}),r=await t.json().catch(()=>({}));if(!t.ok)throw Error(null!=(s=r.error)?s:"Falha ao atualizar thread.");H&&await ep(H)}catch(e){ee(e instanceof Error?e.message:"Falha ao atualizar thread.")}finally{K(null)}},ew=async e=>{if(O&&H){K("approval-".concat(e)),ee(null);try{var a;let s=await fetch("/api/review/approvals",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({deliverableId:O.deliverable.id,versionId:H,decision:e,note:W})}),t=await s.json().catch(()=>({}));if(!s.ok)throw Error(null!=(a=t.error)?a:"Falha ao registar decis\xe3o.");Z(""),ee("approved"===e?"Vers\xe3o aprovada.":"Pedido de altera\xe7\xf5es enviado."),await eu(H)}catch(e){ee(e instanceof Error?e.message:"Falha ao registar aprova\xe7\xe3o.")}finally{K(null)}}},ek=async e=>{K("task-".concat(e)),ee(null);try{var a,s,t;let r=await fetch("/api/review/tasks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({threadId:e})}),l=await r.json().catch(()=>({}));if(!r.ok)throw Error(null!=(s=l.error)?s:"Falha ao criar tarefa.");ee("Tarefa criada: ".concat(null!=(t=null==(a=l.task)?void 0:a.title)?t:"review follow-up"))}catch(e){ee(e instanceof Error?e.message:"Falha ao criar tarefa.")}finally{K(null)}},eA=async()=>{if(O){K("share-link"),ee(null);try{var e;let a=await fetch("/api/review/links",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({deliverableId:O.deliverable.id,expiresInDays:et,password:ea||void 0,singleUse:el,requireAuth:en,allowGuestComments:eo})}),s=await a.json().catch(()=>({}));if(!a.ok)throw Error(null!=(e=s.error)?e:"Falha ao criar link de review.");eh(s.shareUrl),ee("Review link criado.")}catch(e){ee(e instanceof Error?e.message:"Falha ao criar review link.")}finally{K(null)}}},eC=async()=>{em&&(await navigator.clipboard.writeText(em),ee("Link copiado para a \xe1rea de transfer\xeancia."))};return _?(0,t.jsx)("div",{className:"min-h-[70vh] flex items-center justify-center",children:(0,t.jsxs)("div",{className:"inline-flex items-center gap-2 text-sm",style:{color:"var(--text-2)"},children:[(0,t.jsx)(o.A,{className:"h-4 w-4 animate-spin"})," A carregar review..."]})}):F||!O?(0,t.jsxs)("div",{className:"mx-auto max-w-3xl rounded-[24px] border p-6 card-glass",style:{borderColor:"var(--border-soft)"},children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-red-500",children:[(0,t.jsx)(d.A,{className:"h-4 w-4"})," ",null!=F?F:"Falha ao carregar review."]}),(0,t.jsx)("button",{className:"btn btn-secondary mt-4",onClick:()=>void eu(H||void 0),children:"Retry"})]}):(0,t.jsxs)(c.P.div,{initial:!!E&&"initial",animate:E?"animate":void 0,variants:A.HI.page,transition:A.bm.page,className:"space-y-5",children:[(0,t.jsx)("header",{className:"card-glass rounded-[28px] border px-5 py-4 md:px-6",style:{borderColor:"var(--border-soft)"},children:(0,t.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs uppercase tracking-[0.12em]",style:{color:"var(--text-3)"},children:"Review & Approvals"}),(0,t.jsx)("h1",{className:"text-[1.35rem] font-semibold tracking-[-0.02em]",style:{color:"var(--text)"},children:O.deliverable.title}),(0,t.jsxs)("p",{className:"text-xs",style:{color:"var(--text-2)"},children:["Estado atual: ",(0,t.jsx)("strong",{children:null!=(x=O.deliverable.status)?x:"pending"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(i(),{href:"/portal/projects/".concat(O.deliverable.project_id),className:"btn btn-secondary btn-sm",children:"Voltar ao projeto"}),ev?(0,t.jsxs)("a",{className:"btn btn-secondary btn-sm",href:ev,target:"_blank",rel:"noopener noreferrer",children:["Abrir ficheiro ",(0,t.jsx)(m.A,{className:"h-3.5 w-3.5"})]}):null]})]})}),Q?(0,t.jsxs)("div",{className:"alert",children:[(0,t.jsx)(h.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:Q})]}):null,(0,t.jsxs)("div",{className:"grid gap-5 xl:grid-cols-[minmax(0,1.4fr)_minmax(340px,0.9fr)]",children:[(0,t.jsxs)("section",{className:"space-y-5",children:[(0,t.jsxs)("div",{className:"card rounded-[24px] p-4 md:p-5",children:[(0,t.jsxs)("div",{className:"mb-3 flex flex-wrap items-center justify-between gap-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"pill",children:"Vers\xe3o"}),(0,t.jsx)("select",{className:"input h-9 min-w-[140px] text-sm",value:H,onChange:e=>{let a=e.target.value;L(a),eu(a)},children:O.versions.map(e=>(0,t.jsxs)("option",{value:e.id,children:[function(e){var a,s;let t=null!=(s=null!=(a=e.version_number)?a:e.version)?s:1;return"v".concat(t)}(e)," \xb7 ",new Date(e.created_at).toLocaleDateString("pt-PT")]},e.id))})]}),(0,t.jsxs)("button",{className:"btn btn-secondary btn-sm",onClick:()=>{var e;let a=M.current;a&&G(Number(null!=(e=a.currentTime)?e:0))},disabled:!ef,...(0,A.HY)({enabled:E}),children:[(0,t.jsx)(p.A,{className:"h-3.5 w-3.5"}),"Marcar timecode"]})]}),(0,t.jsx)("div",{className:"overflow-hidden rounded-[20px] border",style:{borderColor:"var(--border)"},children:ev?ef?(0,t.jsx)("video",{ref:M,controls:!0,preload:"metadata",className:"max-h-[520px] w-full bg-black",children:(0,t.jsx)("source",{src:ev,type:"video/mp4"})}):ej?(0,t.jsx)("img",{src:ev,alt:O.deliverable.title,className:"max-h-[520px] w-full object-contain"}):(0,t.jsxs)("div",{className:"flex min-h-[260px] items-center justify-center p-8 text-sm",style:{color:"var(--text-2)"},children:[(0,t.jsx)(u.A,{className:"mr-2 h-4 w-4"})," Sem preview direta para este ficheiro."]}):(0,t.jsx)("div",{className:"flex min-h-[260px] items-center justify-center p-8 text-sm",style:{color:"var(--text-2)"},children:"Sem ficheiro associado nesta vers\xe3o."})}),(0,t.jsxs)("form",{onSubmit:eb,className:"mt-4 space-y-2",children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2 text-xs",style:{color:"var(--text-3)"},children:[(0,t.jsx)("span",{className:"pill",children:"Novo coment\xe1rio"}),(0,t.jsxs)("span",{className:"inline-flex items-center gap-1",children:[(0,t.jsx)(v,{className:"h-3.5 w-3.5"})," ",C(Y)]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("input",{className:"input flex-1",value:D,onChange:e=>U(e.target.value),placeholder:"Adicionar coment\xe1rio no ponto atual"}),(0,t.jsx)("button",{className:"btn btn-primary",disabled:!D.trim()||"create-thread"===B,children:"create-thread"===B?(0,t.jsx)(o.A,{className:"h-4 w-4 animate-spin"}):(0,t.jsx)(y.A,{className:"h-4 w-4"})})]})]})]}),O.access.canApprove?(0,t.jsxs)("div",{className:"card rounded-[24px] p-4 md:p-5",children:[(0,t.jsx)("h2",{className:"text-sm font-semibold",style:{color:"var(--text)"},children:"Aprova\xe7\xe3o da vers\xe3o"}),(0,t.jsx)("p",{className:"mt-1 text-xs",style:{color:"var(--text-3)"},children:"Regista decis\xe3o formal com nota opcional e audit trail."}),(0,t.jsx)("textarea",{className:"input mt-3 min-h-24 w-full",placeholder:"Nota opcional (ex: pedido de ajustes em legendas)",value:W,onChange:e=>Z(e.target.value)}),(0,t.jsxs)("div",{className:"mt-3 flex flex-wrap gap-2",children:[(0,t.jsxs)("button",{className:"btn btn-primary",disabled:"approval-approved"===B,onClick:()=>void ew("approved"),children:["approval-approved"===B?(0,t.jsx)(o.A,{className:"h-4 w-4 animate-spin"}):(0,t.jsx)(f.A,{className:"h-4 w-4"}),"Aprovar vers\xe3o"]}),(0,t.jsxs)("button",{className:"btn btn-secondary",disabled:"approval-changes_requested"===B,onClick:()=>void ew("changes_requested"),children:["approval-changes_requested"===B?(0,t.jsx)(o.A,{className:"h-4 w-4 animate-spin"}):(0,t.jsx)(j.A,{className:"h-4 w-4"}),"Pedir altera\xe7\xf5es"]})]}),O.approvals.length>0?(0,t.jsx)("div",{className:"mt-4 space-y-2",children:O.approvals.slice(0,3).map(e=>{var a,s;return(0,t.jsx)("div",{className:"flex items-start justify-between rounded-2xl border p-3",style:{borderColor:"var(--border)"},children:(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium",style:{color:"var(--text)"},children:"approved"===e.decision?"Aprovado":"changes_requested"===e.decision?"Altera\xe7\xf5es pedidas":"Rejeitado"}),(0,t.jsx)("p",{className:"text-xs",style:{color:"var(--text-3)"},children:new Date(null!=(a=e.approved_at)?a:e.created_at).toLocaleString("pt-PT")}),e.note||e.comment?(0,t.jsx)("p",{className:"mt-1 text-xs",style:{color:"var(--text-2)"},children:null!=(s=e.note)?s:e.comment}):null]})},e.id)})}):null]}):null]}),(0,t.jsxs)("aside",{className:"space-y-5",children:[(0,t.jsxs)("div",{className:"card rounded-[24px] p-4 md:p-5",children:[(0,t.jsx)("h2",{className:"text-sm font-semibold",style:{color:"var(--text)"},children:"Threads"}),(0,t.jsxs)("p",{className:"text-xs",style:{color:"var(--text-3)"},children:[z.length," discuss\xf5es nesta vers\xe3o."]}),(0,t.jsx)("div",{className:"mt-3 max-h-[52vh] space-y-3 overflow-y-auto pr-1",children:0===z.length?(0,t.jsx)("div",{className:"rounded-2xl border p-4 text-sm",style:{borderColor:"var(--border)",color:"var(--text-2)"},children:"Sem coment\xe1rios nesta vers\xe3o."}):z.map(e=>{var a,s,r;let l=e.review_comments[0],i=V===e.id,n=B==="thread-".concat(e.id),d=B==="reply-".concat(e.id);return(0,t.jsxs)(c.P.div,{layout:!0,initial:!!E&&{opacity:0,y:6},animate:E?{opacity:1,y:0}:void 0,transition:A.bm.smooth,className:"rounded-2xl border p-3",style:{borderColor:i?"var(--accent-primary)":"var(--border)"},children:[(0,t.jsxs)("button",{className:"w-full text-left",onClick:()=>(e=>{J(e.id);let a=e.timecode_seconds;ef&&M.current&&Number.isFinite(a)&&(M.current.currentTime=Number(a),M.current.play().catch(()=>void 0))})(e),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,t.jsx)("span",{className:"pill text-[11px]",children:C(e.timecode_seconds)}),(0,t.jsx)("span",{className:"text-[11px]",style:{color:"resolved"===e.status?"#10b981":"var(--text-3)"},children:"resolved"===e.status?"Resolvido":"Aberto"})]}),(0,t.jsx)("p",{className:"mt-2 line-clamp-2 text-sm",style:{color:"var(--text)"},children:null!=(a=null==l?void 0:l.body)?a:"Thread sem coment\xe1rio"})]}),(0,t.jsx)("div",{className:"mt-2 space-y-1",children:e.review_comments.slice(1).map(e=>(0,t.jsx)("p",{className:"rounded-xl bg-[var(--surface-2)] px-2.5 py-2 text-xs",style:{color:"var(--text-2)"},children:e.body},e.id))}),(0,t.jsxs)("div",{className:"mt-3 flex flex-wrap gap-2",children:[(0,t.jsxs)("button",{className:"btn btn-secondary btn-sm",onClick:()=>void eg(e.id,"resolved"===e.status?"open":"resolved"),disabled:n,children:[n?(0,t.jsx)(o.A,{className:"h-3.5 w-3.5 animate-spin"}):(0,t.jsx)(b.A,{className:"h-3.5 w-3.5"}),"resolved"===e.status?"Reabrir":"Resolver"]}),(0,t.jsxs)("button",{className:"btn btn-secondary btn-sm",onClick:()=>void ek(e.id),disabled:B==="task-".concat(e.id),children:[B==="task-".concat(e.id)?(0,t.jsx)(o.A,{className:"h-3.5 w-3.5 animate-spin"}):(0,t.jsx)(N.A,{className:"h-3.5 w-3.5"}),"Criar tarefa"]})]}),(0,t.jsxs)("div",{className:"mt-2 flex gap-2",children:[(0,t.jsx)("input",{className:"input h-9 flex-1 text-xs",placeholder:"Responder...",value:null!=(s=X[e.id])?s:"",onChange:a=>$(s=>({...s,[e.id]:a.target.value}))}),(0,t.jsx)("button",{className:"btn btn-secondary btn-sm",disabled:!(null!=(r=X[e.id])?r:"").trim()||d,onClick:()=>void eN(e.id),children:d?(0,t.jsx)(o.A,{className:"h-3.5 w-3.5 animate-spin"}):(0,t.jsx)(g.A,{className:"h-3.5 w-3.5"})})]})]},e.id)})})]}),O.access.canWrite?(0,t.jsxs)("div",{className:"card rounded-[24px] p-4 md:p-5",children:[(0,t.jsx)("h2",{className:"text-sm font-semibold",style:{color:"var(--text)"},children:"Share review link"}),(0,t.jsx)("p",{className:"text-xs",style:{color:"var(--text-3)"},children:"Token seguro com expira\xe7\xe3o e controlo de coment\xe1rios guest."}),(0,t.jsxs)("div",{className:"mt-3 grid gap-2 sm:grid-cols-2",children:[(0,t.jsxs)("label",{className:"label",children:["Expira (dias)",(0,t.jsx)("input",{type:"number",min:1,max:30,value:et,onChange:e=>er(Number(e.target.value||7)),className:"input mt-1 h-9 w-full"})]}),(0,t.jsxs)("label",{className:"label",children:["Password (opcional)",(0,t.jsx)("input",{type:"password",value:ea,onChange:e=>es(e.target.value),className:"input mt-1 h-9 w-full",placeholder:"••••••••"})]})]}),(0,t.jsxs)("div",{className:"mt-2 grid gap-1.5 text-xs",style:{color:"var(--text-2)"},children:[(0,t.jsxs)("label",{className:"inline-flex items-center gap-2",children:[(0,t.jsx)("input",{type:"checkbox",checked:el,onChange:e=>ei(e.target.checked)}),"Single-use"]}),(0,t.jsxs)("label",{className:"inline-flex items-center gap-2",children:[(0,t.jsx)("input",{type:"checkbox",checked:en,onChange:e=>ec(e.target.checked)}),"Exigir autentica\xe7\xe3o"]}),(0,t.jsxs)("label",{className:"inline-flex items-center gap-2",children:[(0,t.jsx)("input",{type:"checkbox",checked:eo,onChange:e=>ed(e.target.checked)}),"Permitir coment\xe1rios guest"]})]}),(0,t.jsxs)("button",{className:"btn btn-primary mt-3 w-full",onClick:()=>void eA(),disabled:"share-link"===B,children:["share-link"===B?(0,t.jsx)(o.A,{className:"h-4 w-4 animate-spin"}):(0,t.jsx)(h.A,{className:"h-4 w-4"}),"Gerar review link"]}),em?(0,t.jsxs)("div",{className:"mt-3 rounded-2xl border p-3",style:{borderColor:"var(--border)"},children:[(0,t.jsx)("p",{className:"text-xs break-all",style:{color:"var(--text-2)"},children:em}),(0,t.jsxs)("div",{className:"mt-2 flex gap-2",children:[(0,t.jsxs)("button",{className:"btn btn-secondary btn-sm",onClick:()=>void eC(),children:[(0,t.jsx)(w.A,{className:"h-3.5 w-3.5"})," Copiar"]}),(0,t.jsxs)("a",{className:"btn btn-secondary btn-sm",href:em,target:"_blank",rel:"noopener noreferrer",children:[(0,t.jsx)(m.A,{className:"h-3.5 w-3.5"})," Abrir"]})]})]}):null]}):null]})]}),(0,t.jsx)("div",{className:"text-xs",style:{color:"var(--text-3)"},children:(0,t.jsxs)("span",{className:"inline-flex items-center gap-1",children:[(0,t.jsx)(k,{className:"h-3.5 w-3.5"})," Estado est\xe1vel: loading/error/empty tratados."]})})]})}},75426:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(71847).A)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},78874:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(71847).A)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},89715:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(71847).A)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},93499:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(71847).A)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])},95740:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(71847).A)("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]])}},e=>{e.O(0,[6028,2619,8441,1255,7358],()=>e(e.s=66832)),_N_E=e.O()}]);