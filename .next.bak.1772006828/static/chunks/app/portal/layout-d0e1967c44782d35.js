(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[58],{20063:(e,a,s)=>{"use strict";var t=s(47260);s.o(t,"useParams")&&s.d(a,{useParams:function(){return t.useParams}}),s.o(t,"usePathname")&&s.d(a,{usePathname:function(){return t.usePathname}}),s.o(t,"useRouter")&&s.d(a,{useRouter:function(){return t.useRouter}}),s.o(t,"useSearchParams")&&s.d(a,{useSearchParams:function(){return t.useSearchParams}})},23421:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>y});var t=s(95155),l=s(12115),r=s(20063),n=s(62890),i=s(52619),c=s.n(i),o=s(56154),d=s(59427),m=s(37494),u=s(84926),p=s(63479),h=s(91040),x=s(34416);function f(e){let{children:a,email:s,onLogout:l}=e,{theme:r,toggleTheme:n}=(0,p.D)();return(0,t.jsx)("div",{className:"super-theme super-shell-bg min-h-dvh p-2 md:p-5",children:(0,t.jsxs)(x.AC,{className:"mx-auto max-w-5xl overflow-hidden",children:[(0,t.jsxs)("header",{className:"super-topbar",children:[(0,t.jsxs)(c(),{href:"/portal",className:"inline-flex items-center gap-2.5",children:[(0,t.jsx)("span",{className:"inline-flex h-8 w-8 items-center justify-center rounded-full",style:{background:"var(--accent-primary)",color:"#fff"},children:(0,t.jsx)(o.A,{className:"h-4 w-4"})}),(0,t.jsx)("span",{className:"text-sm font-semibold tracking-tight",style:{color:"var(--text)"},children:"Beyond Portal"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1.5",children:[s?(0,t.jsx)("span",{className:"hidden rounded-full border px-3 py-1 text-xs md:inline-flex",style:{borderColor:"var(--border-soft)",color:"var(--text-2)"},children:s}):null,(0,t.jsx)("button",{onClick:n,className:"icon-btn",title:"dark"===r?"Modo claro":"Modo escuro","aria-label":"dark"===r?"Modo claro":"Modo escuro",children:"dark"===r?(0,t.jsx)(d.A,{className:"h-4 w-4"}):(0,t.jsx)(m.A,{className:"h-4 w-4"})}),(0,t.jsx)("button",{onClick:()=>void l(),className:"icon-btn",title:"Sair","aria-label":"Sair",children:(0,t.jsx)(u.A,{className:"h-4 w-4"})})]})]}),(0,t.jsxs)("main",{className:"px-3 pb-6 pt-3 md:px-4 md:pt-4",children:[(0,t.jsx)(h.A,{className:"mb-4",avatars:s?[s]:[]}),(0,t.jsx)("div",{className:"surface p-4 sm:p-5",children:a})]})]})})}function y(e){let{children:a}=e,s=(0,r.useRouter)(),i=(0,r.usePathname)(),[c,o]=(0,l.useState)(null),[d,m]=(0,l.useState)(null),[u,h]=(0,l.useState)(!0);(0,l.useEffect)(()=>{let e=(0,n.U)();e.auth.getUser().then(async a=>{var t;let{data:l}=a;if(!l.user)return void s.replace("/portal/login");let[r,n]=await Promise.all([fetch("/api/auth/validate-audience?audience=client",{cache:"no-store"}),fetch("/api/auth/validate-audience?audience=collaborator",{cache:"no-store"})]);if(!r.ok&&!n.ok){await e.auth.signOut(),s.replace("/portal/login?mismatch=1");return}m(l.user.id),o(null!=(t=l.user.email)?t:null),h(!1)})},[s]);let x=async()=>{let e=(0,n.U)();await e.auth.signOut(),s.push("/portal/login")};return"/portal/login"===i||"/portal/invite"===i?(0,t.jsx)(p.ThemeProvider,{children:a}):u?(0,t.jsx)(p.ThemeProvider,{children:(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",style:{background:"var(--bg)"},children:(0,t.jsx)("div",{className:"h-8 w-8 rounded-full border-2 animate-spin",style:{borderColor:"var(--accent)",borderTopColor:"transparent"}})})}):(0,t.jsx)(p.ThemeProvider,{userId:null!=d?d:void 0,children:(0,t.jsx)(f,{email:c,onLogout:x,children:a})})}},37494:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(71847).A)("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]])},56154:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(71847).A)("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]])},59427:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(71847).A)("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]])},78649:(e,a,s)=>{Promise.resolve().then(s.bind(s,23421))},79051:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(71847).A)("Clock3",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16.5 12",key:"1aq6pp"}]])},84926:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(71847).A)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},91040:(e,a,s)=>{"use strict";s.d(a,{A:()=>h,KF:()=>u,O3:()=>p,ab:()=>m,do:()=>x,pp:()=>f,u4:()=>y});var t=s(95155),l=s(69434),r=s(41407),n=s(10383),i=s(79051),c=s(86651),o=s(64269),d=s(4874);function m(e){let{className:a,children:s,active:r=!1}=e,n=(0,d.Y3)();return(0,t.jsx)(l.P.span,{className:(0,o.cn)("pill",r&&"pill-active",a),...n?{whileHover:{y:-1},transition:d.bm.smooth}:{},children:s})}function u(e){let{className:a,children:s,variant:r="secondary",...n}=e,i=(0,d.Pm)();return(0,t.jsx)(l.P.button,{className:(0,o.cn)("pill-btn","primary"===r?"pill-btn-primary":"pill-btn-secondary",a),...(0,d.HY)({enabled:i}),...n,children:s})}function p(e){let{className:a,...s}=e;return(0,t.jsx)("input",{className:(0,o.cn)("pill-input",a),...s})}function h(e){let{className:a,avatars:s=[]}=e,c=(0,r.I)(),m=new Date().toLocaleDateString("pt-PT",{weekday:"long",day:"2-digit",month:"long"});return(0,t.jsx)(l.P.div,{initial:!c&&"initial",animate:c?void 0:"animate",variants:{initial:{opacity:0,y:-8},animate:{opacity:1,y:0}},transition:d.bm.page,className:(0,o.cn)("top-schedule-bar p-4 md:p-5",a),children:(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-3 md:gap-5",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2.5",children:[(0,t.jsx)("span",{className:"icon-btn","aria-hidden":!0,children:(0,t.jsx)(n.A,{className:"h-4 w-4"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs uppercase tracking-[0.08em]",style:{color:"var(--muted)"},children:"Schedule"}),(0,t.jsx)("p",{className:"text-sm font-semibold capitalize",style:{color:"var(--text)"},children:m})]})]}),(0,t.jsx)("div",{className:"flex flex-1 flex-wrap items-center gap-2",children:["09:00","11:30","14:00","16:30"].map(e=>(0,t.jsxs)("span",{className:"pill inline-flex items-center gap-1.5",children:[(0,t.jsx)(i.A,{className:"h-3.5 w-3.5"}),e]},e))}),(0,t.jsx)("div",{className:"flex items-center",children:s.length>0?(0,t.jsx)("div",{className:"-space-x-2",children:s.slice(0,4).map(e=>(0,t.jsx)("span",{className:"inline-flex h-8 w-8 items-center justify-center rounded-full border text-xs font-semibold",style:{background:"var(--surface-2)",borderColor:"var(--border-soft)",color:"var(--text)"},children:e.trim().slice(0,1).toUpperCase()},e))}):(0,t.jsx)("span",{className:"pill",children:"Sem equipa atribuida"})})]})})}function x(e){let{className:a,title:s,action:r,children:n}=e,i=(0,d.Y3)();return(0,t.jsxs)(l.P.section,{className:(0,o.cn)("chart-card card-hover",a),...(0,d.XC)(i),children:[(0,t.jsxs)("header",{className:"mb-4 flex items-center justify-between gap-3",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold",style:{color:"var(--text)"},children:s}),r]}),n]})}function f(e){let{className:a,title:s,description:l,action:r}=e;return(0,t.jsxs)("div",{className:(0,o.cn)("empty-state empty-state-premium",a),children:[(0,t.jsx)(c.A,{className:"empty-icon"}),(0,t.jsx)("p",{className:"empty-title",children:s}),l?(0,t.jsx)("p",{className:"empty-desc",children:l}):null,r]})}function y(e){let{className:a}=e;return(0,t.jsx)(l.P.div,{initial:{opacity:.65},animate:{opacity:1},transition:{duration:.45,ease:"easeOut"},className:(0,o.cn)("skeleton-card h-28",a)})}}},e=>{e.O(0,[5417,6028,4909,2619,1163,6912,9939,6394,9922,8441,1255,7358],()=>e(e.s=78649)),_N_E=e.O()}]);