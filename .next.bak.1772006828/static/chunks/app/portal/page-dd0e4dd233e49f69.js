(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5993],{4874:(e,t,a)=>{"use strict";a.d(t,{HI:()=>n,HY:()=>o,Pm:()=>c,XC:()=>d,Y3:()=>l,bm:()=>r});var i=a(12115),s=a(41407);let r={page:{duration:.26,ease:"easeOut"},micro:{type:"spring",stiffness:380,damping:32,mass:.6},smooth:{duration:.22,ease:"easeOut"}},n={page:{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8}},tab:{initial:{opacity:0,x:12},animate:{opacity:1,x:0},exit:{opacity:0,x:-12}},listItem:{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8}},fadeIn:{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}}};function c(){return!(0,s.I)()}function l(){let e=c(),[t,a]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{let e=window.matchMedia("(min-width: 1024px) and (hover: hover) and (pointer: fine)"),t=()=>a(e.matches);return t(),e.addEventListener("change",t),()=>e.removeEventListener("change",t)},[]),e&&t}function o(e){var t,a;return e.enabled?{whileHover:{y:null!=(t=e.hoverY)?t:-1.5},whileTap:{scale:null!=(a=e.tapScale)?a:.98},transition:r.micro}:{}}function d(e){return e?{whileHover:{y:-4,scale:1.004},transition:r.micro}:{}}},10383:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});let i=(0,a(71847).A)("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]])},20063:(e,t,a)=>{"use strict";var i=a(47260);a.o(i,"useParams")&&a.d(t,{useParams:function(){return i.useParams}}),a.o(i,"usePathname")&&a.d(t,{usePathname:function(){return i.usePathname}}),a.o(i,"useRouter")&&a.d(t,{useRouter:function(){return i.useRouter}}),a.o(i,"useSearchParams")&&a.d(t,{useSearchParams:function(){return i.useSearchParams}})},24582:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>h});var i=a(95155),s=a(12115),r=a(20063),n=a(62890),c=a(35299),l=a(58734),o=a(99051),d=a(27937),u=a(91040);let m={rascunho:"Rascunho",enviado:"Enviado",aprovado:"Aprovado",cancelado:"Cancelado",arquivado:"Arquivado"},p={rascunho:"var(--text-3)",enviado:"var(--pastel-blue-text)",aprovado:"var(--pastel-green-text)",cancelado:"var(--error)",arquivado:"var(--text-3)"};function h(){let e=(0,r.useRouter)(),[t,a]=(0,s.useState)([]),[h,y]=(0,s.useState)(!0),[x,v]=(0,s.useState)(!0);return((0,s.useEffect)(()=>{(async()=>{var e;let t=(0,n.U)(),{data:{user:i}}=await t.auth.getUser(),[s,r]=await Promise.all([fetch("/api/auth/validate-audience?audience=client",{cache:"no-store"}),fetch("/api/auth/validate-audience?audience=collaborator",{cache:"no-store"})]),c=s.ok,l=r.ok;v(c);let o=t.from("project_members").select("project_id, role, projects:project_id(id, name, status, updated_at)").eq("user_id",null!=(e=null==i?void 0:i.id)?e:"").not("projects","is",null);c?o=o.in("role",["client_viewer","client_approver"]):l&&(o=o.in("role",["owner","admin","editor"]));let{data:d}=await o;a((null!=d?d:[]).map(e=>Array.isArray(e.projects)?e.projects[0]:e.projects).filter(Boolean).sort((e,t)=>new Date(t.updated_at).getTime()-new Date(e.updated_at).getTime())),y(!1)})()},[]),h)?(0,i.jsx)("div",{className:"min-h-[36vh] flex items-center justify-center",children:(0,i.jsx)(c.A,{className:"w-8 h-8 animate-spin",style:{color:"var(--text-3)"}})}):(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-xs uppercase tracking-[0.1em]",style:{color:"var(--muted)"},children:x?"Client Area":"Portal Colaborador"}),(0,i.jsx)("h1",{className:"mt-1 page-title",children:"Projetos"})]}),0===t.length?(0,i.jsx)(u.pp,{title:"Nenhum projeto associado",description:"Contacta a Beyond Focus para obter acesso ao teu projeto.",action:(0,i.jsx)(l.A,{className:"empty-icon"})}):(0,i.jsx)("div",{className:"space-y-2",children:t.map(t=>{var a,s,r,n;return(0,i.jsxs)("button",{onClick:()=>e.push("/portal/projects/".concat(t.id)),className:"w-full flex items-center gap-4 px-5 py-4 text-left group card card-hover",style:{padding:"1rem 1.25rem"},children:[(0,i.jsx)("div",{className:"shrink-0",style:{color:null!=(s=p[null!=(a=t.status)?a:"enviado"])?s:"var(--text-3)"},children:(0,i.jsx)(o.A,{className:"w-2 h-2 fill-current"})}),(0,i.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,i.jsx)("p",{className:"font-medium text-sm",style:{color:"var(--text)"},children:t.name}),(0,i.jsxs)("p",{className:"text-xs mt-0.5",style:{color:"var(--text-3)"},children:[null!=(n=m[null!=(r=t.status)?r:"enviado"])?n:t.status," \xb7 ",new Date(t.updated_at).toLocaleDateString("pt-PT",{day:"2-digit",month:"short",year:"numeric"})]})]}),(0,i.jsx)(d.A,{className:"w-4 h-4 shrink-0",style:{color:"var(--text-3)"}})]},t.id)})})]})}},27937:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});let i=(0,a(71847).A)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},35299:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});let i=(0,a(71847).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},41407:(e,t,a)=>{"use strict";a.d(t,{I:()=>n});var i=a(40031),s=a(15824),r=a(12115);function n(){i.r.current||(0,s.Uu)();let[e]=(0,r.useState)(i.O.current);return e}},58734:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});let i=(0,a(71847).A)("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]])},62890:(e,t,a)=>{"use strict";a.d(t,{U:()=>s});var i=a(55417);function s(){return(0,i.createBrowserClient)("https://wjzcutnjnzxylzqysneg.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndqemN1dG5qbnp4eWx6cXlzbmVnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzEzMjYzMjcsImV4cCI6MjA4NjkwMjMyN30.bku3F43nks_Uq22Ag-viZZpMQfrw43eq3sahNChbBq8")}},64269:(e,t,a)=>{"use strict";a.d(t,{$C:()=>o,SS:()=>c,Sc:()=>n,Yv:()=>l,cn:()=>r,kz:()=>d});var i=a(2821),s=a(75889);function r(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.QP)((0,i.$)(t))}function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return e.toLocaleString("pt-PT",{minimumFractionDigits:t,maximumFractionDigits:t})}function c(e){return e.toLocaleString("pt-PT",{style:"currency",currency:"EUR",minimumFractionDigits:2,maximumFractionDigits:2})}function l(e){return e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,"")}function o(){return Math.random().toString(36).slice(2,9)}function d(e){return new Date(e).toLocaleDateString("pt-PT")}},79051:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});let i=(0,a(71847).A)("Clock3",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16.5 12",key:"1aq6pp"}]])},86651:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});let i=(0,a(71847).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},91040:(e,t,a)=>{"use strict";a.d(t,{A:()=>h,KF:()=>m,O3:()=>p,ab:()=>u,do:()=>y,pp:()=>x,u4:()=>v});var i=a(95155),s=a(69434),r=a(41407),n=a(10383),c=a(79051),l=a(86651),o=a(64269),d=a(4874);function u(e){let{className:t,children:a,active:r=!1}=e,n=(0,d.Y3)();return(0,i.jsx)(s.P.span,{className:(0,o.cn)("pill",r&&"pill-active",t),...n?{whileHover:{y:-1},transition:d.bm.smooth}:{},children:a})}function m(e){let{className:t,children:a,variant:r="secondary",...n}=e,c=(0,d.Pm)();return(0,i.jsx)(s.P.button,{className:(0,o.cn)("pill-btn","primary"===r?"pill-btn-primary":"pill-btn-secondary",t),...(0,d.HY)({enabled:c}),...n,children:a})}function p(e){let{className:t,...a}=e;return(0,i.jsx)("input",{className:(0,o.cn)("pill-input",t),...a})}function h(e){let{className:t,avatars:a=[]}=e,l=(0,r.I)(),u=new Date().toLocaleDateString("pt-PT",{weekday:"long",day:"2-digit",month:"long"});return(0,i.jsx)(s.P.div,{initial:!l&&"initial",animate:l?void 0:"animate",variants:{initial:{opacity:0,y:-8},animate:{opacity:1,y:0}},transition:d.bm.page,className:(0,o.cn)("top-schedule-bar p-4 md:p-5",t),children:(0,i.jsxs)("div",{className:"flex flex-wrap items-center gap-3 md:gap-5",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2.5",children:[(0,i.jsx)("span",{className:"icon-btn","aria-hidden":!0,children:(0,i.jsx)(n.A,{className:"h-4 w-4"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-xs uppercase tracking-[0.08em]",style:{color:"var(--muted)"},children:"Schedule"}),(0,i.jsx)("p",{className:"text-sm font-semibold capitalize",style:{color:"var(--text)"},children:u})]})]}),(0,i.jsx)("div",{className:"flex flex-1 flex-wrap items-center gap-2",children:["09:00","11:30","14:00","16:30"].map(e=>(0,i.jsxs)("span",{className:"pill inline-flex items-center gap-1.5",children:[(0,i.jsx)(c.A,{className:"h-3.5 w-3.5"}),e]},e))}),(0,i.jsx)("div",{className:"flex items-center",children:a.length>0?(0,i.jsx)("div",{className:"-space-x-2",children:a.slice(0,4).map(e=>(0,i.jsx)("span",{className:"inline-flex h-8 w-8 items-center justify-center rounded-full border text-xs font-semibold",style:{background:"var(--surface-2)",borderColor:"var(--border-soft)",color:"var(--text)"},children:e.trim().slice(0,1).toUpperCase()},e))}):(0,i.jsx)("span",{className:"pill",children:"Sem equipa atribuida"})})]})})}function y(e){let{className:t,title:a,action:r,children:n}=e,c=(0,d.Y3)();return(0,i.jsxs)(s.P.section,{className:(0,o.cn)("chart-card card-hover",t),...(0,d.XC)(c),children:[(0,i.jsxs)("header",{className:"mb-4 flex items-center justify-between gap-3",children:[(0,i.jsx)("h3",{className:"text-sm font-semibold",style:{color:"var(--text)"},children:a}),r]}),n]})}function x(e){let{className:t,title:a,description:s,action:r}=e;return(0,i.jsxs)("div",{className:(0,o.cn)("empty-state empty-state-premium",t),children:[(0,i.jsx)(l.A,{className:"empty-icon"}),(0,i.jsx)("p",{className:"empty-title",children:a}),s?(0,i.jsx)("p",{className:"empty-desc",children:s}):null,r]})}function v(e){let{className:t}=e;return(0,i.jsx)(s.P.div,{initial:{opacity:.65},animate:{opacity:1},transition:{duration:.45,ease:"easeOut"},className:(0,o.cn)("skeleton-card h-28",t)})}},91484:(e,t,a)=>{Promise.resolve().then(a.bind(a,24582))},99051:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});let i=(0,a(71847).A)("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])}},e=>{e.O(0,[5417,6028,4909,8441,1255,7358],()=>e(e.s=91484)),_N_E=e.O()}]);